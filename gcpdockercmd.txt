GCP Setup
# Setup GCP account
$ gcloud config set account $MY_EMAIL_ADDRESS
$ gcloud auth login $MY_EMAIL_ADDRESS
$ gcloud config set project $MY_PROJECT_ID


# Setup GCP account
$ gcloud config set account andrevsl@gmail.com
$ gcloud auth login andrevsl@gmail.com
$ gcloud config set project flaskdeployfirebase

docker run -d -p 5000:5000 gcr.io/flaskdeployfirebase/flaskapp_cr:v1

CMD exec gunicorn --bind :$PORT main_v1:app --workers 1 --threads 1 --timeout 60
CMD ["gunicorn"  , "--bind", "0.0.0.0:5000", "main_v1:app"]

# Build Docker on your local machine
$ docker build -t gcr.io/$MY_PROJECT_ID/flaskapp_cr:v1 -f Dockerfile .

$ docker build -t gcr.io/flaskdeployfirebase/flaskapp_cr:v2 -f Dockerfile .

# Push the Docker image to Container Registry 
$ docker push gcr.io/$MY_PROJECT_ID/flaskapp_cr:v1

$ docker push gcr.io/flaskdeployfirebase/flaskapp_cr:v2



gcloud auth activate-service-account ACCOUNT --key-file=KEY-FILE  4a83d0ff8859ff6be54980d8dc34ae4746f22ad4
gcloud auth activate-service-account 1079705010275-compute@developer.gserviceaccount.com	--key-file=flaskdeployfirebase-4a83d0ff8859.json

# Deploy a Docker image on Cloud Run
gcloud run deploy flaskapp-cr-v2 --image gcr.io/flaskdeployfirebase/flaskapp_cr:v2 --region us-east1 
gcloud run deploy flaskapp-cr-v2 --image gcr.io/flaskdeployfirebase/flaskapp_cr:v2 --region us-east1 --no-allow-unauthenticated
--platform managed --memory 128Mi

docker run -d -p 5000:5000 gcr.io/flaskdeployfirebase/flaskapp_cr:v1


gcloud run deploy CLOUD_RUN_SERVICE_NAME \
    --image="gcr.io/cloudrun/hello" \
    --allow-unauthenticated \
    --platform managed \
    --project=ESP_PROJECT_ID

gcloud run deploy flaskapp-cr-v2-gateway --image "gcr.io/endpoints-release/endpoints-runtime-serverless:2.17.0" --allow-unauthenticated --platform managed --project flaskdeployfirebase --region us-east1


gcloud endpoints services deploy cloud_endpoint_config.yaml --project=flaskdeployfirebase

./gcloud_build_image -s $ENDPOINT_HOST -c $CONFIG_ID -p $MY_PROJECT_ID

./gcloud_build_image -s flaskapp-cr-v2-gateway-1079705010275.us-east1.run.app -c 2024-12-25r1 -p flaskdeployfirebase

gcloud run deploy flaskapp-cr-v2-gateway --image gcr.io/$MY_PROJECT_ID/endpoints-runtime-serverless:2.17.0-$ENDPOINT_HOST-$CONFIG_ID --allow-unauthenticated --platform managed --project $MY_PROJECT_ID --region us-east1


gcloud run deploy flaskapp-cr-v2-gateway --image gcr.io/flaskdeployfirebase/endpoints-runtime-serverless:2.17.0-flaskapp-cr-v2-gateway-1079705010275.us-east1.run.app-2024-12-25r1 --allow-unauthenticated --platform managed --project flaskdeployfirebase --region us-east1